{
  "code": "import Bg from \"./BG\";\r\nexport default class GameControl extends Laya.Script {\r\n    constructor() {\r\n        super();\r\n        this.height = Laya.stage.height;\r\n        this.width = Laya.stage.width;\r\n        this.pxs = 3;\r\n        this.metroImg = { 30: this.metro30, 150: this.metro150, 210: this.metro210, 330: this.metro330 };\r\n    }\r\n    onEnable() {\r\n        this.bgImg = this.owner.getChildByName(\"bg\");\r\n        this.bgx = this.bgImg.x;\r\n        this.bgy = this.bgImg.y;\r\n        this.bg = new Bg();\r\n        this.moveI = 0;\r\n        this.angle = this.bg.getDirection(this.moveI);\r\n        this.moveX = this.pxs * this.bg.getMoveX(this.angle);\r\n        this.moveY = this.pxs * this.bg.getMoveY(this.angle);\r\n        this.gameStart = false;\r\n        this.metroImg[30] = this.owner.getChildByName(\"metro30\");\r\n        this.metroImg[150] = this.owner.getChildByName(\"metro150\");\r\n        this.metroImg[210] = this.owner.getChildByName(\"metro210\");\r\n        this.metroImg[330] = this.owner.getChildByName(\"metro330\");\r\n        this.metroImg[30].visible = this.metroImg[150].visible = this.metroImg[330].visible = false;\r\n    }\r\n    onClick() {\r\n        if (this.gameStart) {\r\n            this.metroImg[this.angle].visible = false;\r\n            this.moveI++;\r\n            if (this.moveI % 30 == 0) {\r\n                this.pxs += 0.3;\r\n            }\r\n            this.angle = this.bg.getDirection(this.moveI);\r\n            this.moveX = this.pxs * this.bg.getMoveX(this.angle);\r\n            this.moveY = this.pxs * this.bg.getMoveY(this.angle);\r\n            this.metroImg[this.angle].visible = true;\r\n        }\r\n        else {\r\n            this.gameStart = true;\r\n            let txt = this.owner.getChildByName(\"startText\");\r\n            txt.removeSelf();\r\n            console.log(\"游戏开始\");\r\n        }\r\n    }\r\n    onUpdate() {\r\n        if (this.gameStart) {\r\n            if (this.isDied()) {\r\n                this.gameStart = false;\r\n            }\r\n            else {\r\n                this.bgx += this.moveX;\r\n                this.bgy += this.moveY;\r\n                this.bgImg.pos(this.bgx, this.bgy);\r\n            }\r\n        }\r\n    }\r\n    isDied() {\r\n        return false;\r\n    }\r\n}\r\n",
  "references": [
    "C:/Code/LayaGame/MetroTravel/src/BG.ts"
  ]
}
